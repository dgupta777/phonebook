"use strict";(self.webpackChunkphonebook=self.webpackChunkphonebook||[]).push([[893],{893:(q,f,r)=>{r.r(f),r.d(f,{ContactFormModule:()=>S});var h=r(2330),s=r(3621),a=r(4006),t=r(4650),C=r(5550),b=r(7677),x=r(6895),p=r(1576),F=r(3683),M=r(4859),u=r(4988),Z=r(4144),v=r(1572);function y(e,i){1&e&&t._UZ(0,"mat-spinner",15)}function N(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," First Name is required. "),t.qZA())}function A(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Enter a valid email. "),t.qZA())}function I(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Mobile Number is required. "),t.qZA())}function O(e,i){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Enter a valid mobile number. "),t.qZA())}function T(e,i){if(1&e&&(t.TgZ(0,"p",16),t._uU(1),t.qZA()),2&e){const n=t.oxw();t.xp6(1),t.Oqu(n.errMsg)}}let d=(()=>{class e{constructor(n,o,m,c,l){this.fb=n,this.userContactService=o,this.authService=m,this.router=c,this.route=l,this.spinner=!1}ngOnInit(){this.contactId=this.route.snapshot.params.id,this.contactId?(this.isEditMode=!0,this.fillFormData()):this.isEditMode=!1,this.createForm()}createForm(){this.contactForm=this.fb.group({firstName:["",a.kI.required],lastName:"",email:["",a.kI.email],mobile:["",[a.kI.required,a.kI.pattern("^[0-9]{10}$")]],status:"Active",designation:"",org:""})}fillFormData(){this.authService.firebaseSubscriptions.push(this.userContactService.getContactById(this.authService.getUser().id,this.contactId).subscribe(n=>{let o={id:n.payload.id,...n.payload.data()};this.contactForm.patchValue(o)}))}onSubmit(){this.errMsg="",this.spinner=!0;let n=this.contactForm.value;this.isEditMode?this.userContactService.updateContact(this.authService.getUser().id,this.contactId,n).then(()=>{this.success()}).catch(o=>{this.spinner=!1,this.errMsg=o.message}):this.userContactService.addContact(this.authService.getUser().id,n).then(()=>{this.success()}).catch(o=>{this.spinner=!1,this.errMsg=o.message})}success(){this.spinner=!1,this.contactForm.reset({firstName:"",lastName:"",email:"",mobile:null,status:"Active",designation:"",org:""}),this.router.navigate(["/"])}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(a.qu),t.Y36(C.r),t.Y36(b.e),t.Y36(s.F0),t.Y36(s.gz))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-contact-form"]],decls:38,vars:8,consts:[["fxLayout","column","fxLayoutAlign","center center",1,"container"],["fxLayout","column",1,"container-fluid"],["color","accent"],["novalidate","","fxLayout","column","fxLayoutAlign","center center",3,"formGroup","ngSubmit"],["cForm","ngForm"],["class","spinner","color","accent",4,"ngIf"],["matInput","","formControlName","firstName","type","text","required","","autocomplete","off"],[4,"ngIf"],["matInput","","formControlName","lastName","type","text","autocomplete","off"],["matInput","","formControlName","email","type","email","autocomplete","off"],["matInput","","formControlName","mobile","type","tel","maxlength","10","autocomplete","none","required",""],["matInput","","formControlName","designation","type","text","autocomplete","off"],["matInput","","formControlName","org","type","text","autocomplete","off"],["type","submit","mat-raised-button","","color","accent",3,"disabled"],["class","errMsg",4,"ngIf"],["color","accent",1,"spinner"],[1,"errMsg"]],template:function(n,o){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-toolbar",2),t._uU(3," Add New Contact "),t.qZA(),t.TgZ(4,"form",3,4),t.NdJ("ngSubmit",function(){return o.onSubmit()}),t.YNc(6,y,1,0,"mat-spinner",5),t.TgZ(7,"mat-form-field")(8,"mat-label"),t._uU(9,"First Name"),t.qZA(),t._UZ(10,"input",6),t.YNc(11,N,2,0,"mat-error",7),t.qZA(),t.TgZ(12,"mat-form-field")(13,"mat-label"),t._uU(14,"Last Name"),t.qZA(),t._UZ(15,"input",8),t.qZA(),t.TgZ(16,"mat-form-field")(17,"mat-label"),t._uU(18,"Email"),t.qZA(),t._UZ(19,"input",9),t.YNc(20,A,2,0,"mat-error",7),t.qZA(),t.TgZ(21,"mat-form-field")(22,"mat-label"),t._uU(23,"Mobile Number"),t.qZA(),t._UZ(24,"input",10),t.YNc(25,I,2,0,"mat-error",7),t.YNc(26,O,2,0,"mat-error",7),t.qZA(),t.TgZ(27,"mat-form-field")(28,"mat-label"),t._uU(29,"Designation"),t.qZA(),t._UZ(30,"input",11),t.qZA(),t.TgZ(31,"mat-form-field")(32,"mat-label"),t._uU(33,"Organization"),t.qZA(),t._UZ(34,"input",12),t.qZA(),t.TgZ(35,"button",13),t._uU(36," Submit "),t.qZA(),t.YNc(37,T,2,1,"p",14),t.qZA()()()),2&n){let m,c,l,g;t.xp6(4),t.Q6J("formGroup",o.contactForm),t.xp6(2),t.Q6J("ngIf",o.spinner),t.xp6(5),t.Q6J("ngIf",(null==(m=o.contactForm.get("firstName"))?null:m.hasError("required"))&&(null==(m=o.contactForm.get("firstName"))?null:m.touched)),t.xp6(9),t.Q6J("ngIf",null==(c=o.contactForm.get("email"))?null:c.hasError("email")),t.xp6(5),t.Q6J("ngIf",(null==(l=o.contactForm.get("mobile"))?null:l.hasError("required"))&&(null==(l=o.contactForm.get("mobile"))?null:l.touched)),t.xp6(1),t.Q6J("ngIf",null==(g=o.contactForm.get("mobile"))?null:g.hasError("pattern")),t.xp6(9),t.Q6J("disabled",!o.contactForm.valid),t.xp6(2),t.Q6J("ngIf",o.errMsg)}},dependencies:[x.O5,a._Y,a.Fj,a.JJ,a.JL,a.Q7,a.nD,a.sg,a.u,p.xw,p.Wh,F.Ye,M.lW,u.TO,u.KE,u.hX,Z.Nt,v.Ou],styles:[".container[_ngcontent-%COMP%]{padding:50px 0;min-height:100%;width:100%;color:#fff;font-family:Merriweather,serif}.container-fluid[_ngcontent-%COMP%]{width:480px;border-radius:10px;padding:10px;border:1px solid rgba(255,255,255,.5);box-shadow:20px 20px 50px #00000080;-webkit-box-shadow:20px 20px 50px rgba(0,0,0,.5);-moz-box-shadow:20px 20px 50px rgba(0,0,0,.5)}mat-toolbar[_ngcontent-%COMP%]{border-radius:10px 10px 0 0;font-family:Merriweather,serif}form[_ngcontent-%COMP%]{padding:15px 5px}.spinner[_ngcontent-%COMP%]{position:absolute;z-index:9}mat-form-field[_ngcontent-%COMP%]{width:90%;margin:10px 0 0;font-family:Merriweather,serif}.errMsg[_ngcontent-%COMP%]{color:#d04e68;text-align:center;margin:0 10px 10px}mat-form-field.mat-form-field[_ngcontent-%COMP%]{width:90%;margin:10px 0 0;color:#fff}mat-label[_ngcontent-%COMP%],   .mat-form-field-required-marker{color:#fff!important}mat-error[_ngcontent-%COMP%]{color:#d04e68!important}  .mat-form-field-underline,   .mat-form-field-ripple{background-color:#d04e68!important}input[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{color:#fff!important;caret-color:#fff!important}button[_ngcontent-%COMP%], .mat-raised-button.mat-button-disabled.mat-button-disabled[_ngcontent-%COMP%]{width:100px;margin:15px;color:#fff;border-top:1px solid rgba(255,255,255,.5);border-left:1px solid rgba(255,255,255,.5);font-family:Merriweather,serif}input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}@media screen and (max-width: 480px){.container-fluid[_ngcontent-%COMP%]{width:350px}}"]}),e})();const U=[{path:"add-contact",component:d},{path:"edit-contact/:id",component:d}];let _=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[s.Bz.forChild(U),s.Bz]}),e})(),S=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[h.m,_]}),e})()}}]);